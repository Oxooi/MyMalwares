from PIL import Image, ImageDraw, ImageFont
import random

#Création du fond de l'image
image = Image.new("RGB", (300, 80), (220, 210, 190))
draw = ImageDraw.Draw(image)

#Céation du texte
textImg = Image.new("RGBA", (150, 40), (0, 0, 0))
tmpDraw = ImageDraw.Draw(textImg)
textFont = ImageFont.truetype("impact.ttf", 30)
tmpDraw.text((0, 0), str(random.randint(20,50)) + str(random.randint(20,50)), font=textFont, fill=(10, 200, 200))
textImg = textImg.rotate(10)

#Création du masque (meme taille que le texte)
mask = Image.new("L", (150,40), 0)
mask.paste(textImg, (0, 0))

#On colle le texte sur l'image
image.paste(textImg, (100, 20), mask)

#On sauvegarde l'image
image.save("captcha.png")
