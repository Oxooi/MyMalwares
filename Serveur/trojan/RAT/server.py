import socket
import time

ADRESSE = "192.168.1.1"
PORT = 1337

server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server.bind((ADRESSE, PORT))
server.listen(1)

client, adresseClient = server.accept()
print(f"Connexion de {adresseClient}")

while True:
    cmd = input('Command to send : ')
    cmd = cmd.encode('utf-8')
    n = client.send(cmd)
    if n != len(cmd):
        print('Erreur lors de l\'envoi.')
        break
    else:
        time.sleep(0.1)

print('Fermeture de la connexion avec le client')
client.close()
print('Arret du serveur')
server.close()
