import socket
import time
import os

IPSERVEUR = '192.168.1.1'
PORT = 1337

client = socket.socket()
client.connect((IPSERVEUR, PORT))
print(f"Connexion vers {IPSERVEUR} : " + str(PORT) + " réussie.")

while True:
    data = client.recv(1024)
    data = data.decode('utf-8')
    arr_data = data.split()
    if not data:
        print('Error while recieve')
        break
    else:
        match arr_data[0]:
            case 'close':  # Close the connection
                client.close()
                break
            case 'mkdir':
                name = arr_data[1]
                os.mkdir(f"./{name}")
            case _:  # Default case
                # pass  # Ignore the instruction
                print(arr_data)

    time.sleep(0.1)

print('Déconnexion.')
client.close()
